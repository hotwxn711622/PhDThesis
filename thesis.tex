\documentclass[letterpaper,11pt]{yalephd}
% remove draft option for final printing.
% font size must be between 10pt-12pt.

%\usepackage{geometry} % you need this for yalephd.cls to work.
%\usepackage{dcolumn}
%\usepackage{amsfonts}
\usepackage{appendix}
%\usepackage{comment}
%\usepackage{cite}
%\usepackage{notoccite}
\usepackage{makecell}

\usepackage[numbers,square]{natbib}
\usepackage{times}
\usepackage{courier}
\usepackage[scaled]{helvet}
\usepackage{url}
\usepackage[utf8]{inputenc} %for utf8 input
\usepackage[T1]{fontenc} %for accented characters
\usepackage{microtype} %better micro typing
\usepackage{datetime}
\usepackage{amssymb} %for shift symbol
\usepackage{amsmath}
\usepackage{mathrsfs} %for mathscr font
\usepackage{listings, multicol, lstcoq} %for code
\usepackage{enumitem}      % adjust spacing in enums
\usepackage{stmaryrd} %for llbracket
\usepackage{mathabx} % for boxes
\usepackage{graphicx} %to include png images
\usepackage{subfig}
\usepackage[usenames,dvipsnames]{color} 
\usepackage{comment}
\usepackage{bussproofs} %for proof trees
\usepackage{flushend}
\usepackage[colorlinks=false,allcolors=black,breaklinks,draft=false]{hyperref} 
\newcommand{\doi}[1]{doi:~\href{http://dx.doi.org/#1}{\Hurl{#1}}} 
\usepackage{mathptmx}      % use Times fonts if available on your TeX system
\usepackage{latexsym}
\usepackage{morefloats}
%\usepackage{bm}
\usepackage{tabu}

\newtheorem{definition}{Definition}
\newtheorem{theorem}{Theorem}
\newtheorem{lemma}{Lemma}
\newtheorem{corollary}{Corollary}
%\newtheorem{invariant}{Invariant}

\usepackage[normalem]{ulem} % for strike out

% please place your own definitions here and don't use \def but
% \newcommand{}{}
\usepackage{prettyref}
\newcommand{\pref}[1]{\prettyref{#1}}
\newcommand{\Pref}[1]{\prettyref{#1} \vpageref[]{#1}}
\newcommand{\ppref}[1]{\vpageref[]{#1}}
\newrefformat{fig}{Figure~\ref{#1}}
\newrefformat{tab}{Table~\ref{#1}}
%----------------------------------------------------

\usepackage{mathpartir}
\usepackage[scaled=0.85]{DejaVuSansMono}
\definecolor{mygreen}{rgb}{0,0.6,0}
\definecolor{mygray}{rgb}{0.5,0.5,0.5}
\definecolor{mymauve}{rgb}{0.58,0,0.82}
\definecolor{ltblue}{rgb}{0,0.4,0.4}
\definecolor{dkblue}{rgb}{0,0.1,0.6}
\definecolor{dkgreen}{rgb}{0,0.35,0}
\definecolor{dkviolet}{rgb}{0.3,0,0.5}
\definecolor{dkred}{rgb}{0.5,0,0}
%----------------------------------------------------

\lstset{ %
	backgroundcolor=\color{white},   % choose the background color; you must add \usepackage{color} or \usepackage{xcolor}
	basicstyle=\ttfamily,      % the size of the fonts that are used for the code
	breakatwhitespace=false,         % sets if automatic breaks should only happen at whitespace
	breaklines=true,                 % sets automatic line breaking
	%captionpos=b,                   % sets the caption-position to bottom
	commentstyle=\color{mygreen},    % comment style
	deletekeywords={...},            % if you want to delete keywords from the given language
	escapeinside={<@}{@>},          % if you want to add LaTeX within your code
	extendedchars=true,              % lets you use non-ASCII characters; for 8-bits encodings only, does not work with UTF-8
	frame=none,	                   % adds a frame around the code
	keepspaces=true,                 % keeps spaces in text, useful for keeping indentation of code (possibly needs columns=flexible)
	keywordstyle=\color{blue},       % keyword style
	language=Octave,                 % the language of the code
	otherkeywords={*, Inductive, Fixpoint, Record, typedef, struct, Function , Definition, Prop, then, true, false, ...},           % if you want to add more keywords to the set
	emph = {in, uint, match, end, with, let, ret, do, forall, exist, :=, =>, ->},
	emphstyle=\bf,%
	moredelim=[is][emphstyle]{|>}{<|},%
	numbers=left,                    % where to put the line-numbers; possible values are (none, left, right)
	numbersep=5pt,                   % how far the line-numbers are from the code
	numberstyle=\scriptsize\color{mygray}, % the style that is used for the line-numbers
	rulecolor=\color{black},         % if not set, the frame-color may be changed on line-breaks within not-black text (e.g. comments (green here))
	showspaces=false,                % show spaces everywhere adding particular underscores; it overrides 'showstringspaces'
	showstringspaces=false,          % underline spaces within strings only
	showtabs=false,                  % show tabs within strings adding particular underscores
	stepnumber=1,                    % the step between two line-numbers. If it's 1, each line will be numbered
	stringstyle=\color{mymauve},     % string literal style
	tabsize=2,	                   % sets default tabsize to 2 spaces
	%title=\lstname                   % show the filename of files included with \lstinputlisting; also try caption instead of title
}

\newenvironment{myproof}{{\bf Proof:}}{\hfill\rule{2mm}{2mm}}

\newif\ifTRthen
\TRthenfalse
\input{local}  % all the local macros used in the paper

\bibliographystyle{abbrvunsrt}

\begin{document}

% Need to define title before the abstract.
\title{A Compositional Automation Engine for Verifying Complex System Software}
\author{Xiongnan (Newman) Wu}
\advisor{Zhong Shao}
\date{August, 2018} 

% All the stuff at the front of your thesis.
\frontmatter

\begin{abstract}
\input{abstract}
\end{abstract}


\maketitle
\makecopyright{2018} % change as needed.
\tableofcontents
\listoffigures % remove this if you have no figures.
\listoftables % remove this if you have no tables.

\chapter{Acknowledgements} % this needs to be before \mainmatter.


% Starts proper arabic numbering of pages and chapters.
\mainmatter

\chapter{Introduction}
\input{intro}        % Introduction 

\chapter{Certified Abstraction Layers}
\label{chapter:framework}
\input{framework}

\chapter{Verification of ClightX and LAsm Programs}
\label{chapter:automation}
\input{automation}

\chapter{Case Study: Verification of the mCertiKOS Kernel}
\label{chapter:sequential}
\input{sequential}

\chapter{Supporting Device Drivers and Interrupts}
\label{chapter:driver}
\input{overview}     % Overview of Our Approach
\input{device}	 % Device model\includegraphics[scale=1]{../popl15/main.pdf} 
\input{driver}	 % Device driver verification
%\section{A More Realistic Device and Interrupt Model}
%\input{model}	 % More realistic machine model
\input{case}  % Case study
\input{layers}  % Case study
\input{eval}		 % Evaluation and lessons learned

\chapter{Verification of Concurrent Programs}
\label{chapter:concurrent}
\input{concurrent}

%\chapter{Limitations and Future Work}
%\label{chapter:limitation}
%\input{lim}		 % Limitation and future work

\chapter{Related Work}
\label{chapter:related}
\input{related}      % Related Work 

\chapter{Limitations, Future Work, and Conclusions}
\label{chapter:conclusion}
\input{concl}        % Conclusions 

% Add additional \chapter{}s as necessary.

% use \cite{} to cite a reference in your bibliography file.
% use \ref{} to reference a \label{} from an equation, figure, or table.

% for sets of equations use align or gather:
%\begin{align}
%\end{align}

% for long equations, use multline.

% for figures:
%\begin{figure}[ht]
%\centering
%\includegraphics[width=.45\textwidth]{name_of_figure.eps}
%\caption{A caption! \label{a_figure}}
%\end{figure}

% for tables:
%\begin{table}
%\begin{tabular}{c|c|c}
% 1 & 2 & 3 \\
%\hline
%\end{tabular}
%\caption{Another caption! \label{a_table}}
%\end{table}

% Only call appendix once, here.
%\appendix
%
%\chapter{Stuff}
%If you need an appendix, it will go here.
%
%\begin{align}
%a^n + b^n &\ne c^n \\
%n &> 2
%\end{align}
%
%\chapter{More stuff}
%A second appendix. Look at you, you over achiever.

% Any chapters such as End Notes go after this.
\backmatter

\bibliography{refs}
% for your own sake, use a bibtex file, so all of the numbering of references will be done
% automatically.

\end{document}
